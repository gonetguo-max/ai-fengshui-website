<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIæµ‹è¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #0F1419; color: white; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #333; border-radius: 8px; }
        .mobile-test { background: #1A1F2E; padding: 15px; }
        .form-test { background: #212936; padding: 20px; border-radius: 8px; }
        .form-group { margin: 10px 0; }
        label { display: block; margin-bottom: 5px; color: #94A3B8; }
        input, select, textarea { 
            width: 100%; 
            padding: 10px; 
            background: #2A3441; 
            border: 1px solid #444; 
            border-radius: 4px; 
            color: white;
        }
        button { 
            padding: 12px 24px; 
            background: #DAA520; 
            color: white; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer;
            font-size: 16px;
        }
        .result-box { 
            background: #2A3441; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            min-height: 100px;
        }
        @media (max-width: 768px) {
            body { margin: 10px; }
            .test-section { padding: 15px; }
        }
    </style>
</head>
<body>
    <h1>ğŸ® é£æ°´ç½‘ç«™UIæµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“± ç§»åŠ¨ç«¯å“åº”å¼æµ‹è¯•</h2>
        <div class="mobile-test">
            <p>è¯·è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æµ‹è¯•å“åº”å¼å¸ƒå±€</p>
            <button onclick="testMobile()">æµ‹è¯•ç§»åŠ¨ç«¯å…¼å®¹æ€§</button>
            <div id="mobile-result" class="result-box"></div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“ è¡¨å•äº¤äº’æµ‹è¯•</h2>
        <div class="form-test">
            <div class="form-group">
                <label>æˆ¿å±‹ç±»å‹</label>
                <select id="houseType">
                    <option>ä½å®…</option>
                    <option>å•†ä¸š</option>
                    <option>åŠå…¬</option>
                </select>
            </div>
            <div class="form-group">
                <label>æœå‘</label>
                <select id="direction">
                    <option>ä¸œ</option>
                    <option>å—</option>
                    <option>è¥¿</option>
                    <option>åŒ—</option>
                </select>
            </div>
            <div class="form-group">
                <label>å…³æ³¨é—®é¢˜</label>
                <textarea id="concerns" rows="3" placeholder="è¯·æè¿°æ‚¨çš„é£æ°´å…³æ³¨ç‚¹"></textarea>
            </div>
            <button onclick="testAPI()">ğŸ”® æµ‹è¯•AIåˆ†æ</button>
            <div id="api-result" class="result-box"></div>
        </div>
    </div>

    <script>
        function testMobile() {
            const width = window.innerWidth;
            const result = document.getElementById('mobile-result');
            
            if (width <= 768) {
                result.innerHTML = `
                    <h3>âœ… ç§»åŠ¨ç«¯æ£€æµ‹</h3>
                    <p>å½“å‰å®½åº¦: ${width}px</p>
                    <p>çŠ¶æ€: ç§»åŠ¨ç«¯å¸ƒå±€å·²æ¿€æ´»</p>
                `;
            } else {
                result.innerHTML = `
                    <h3>ğŸ–¥ï¸ æ¡Œé¢ç«¯æ£€æµ‹</h3>
                    <p>å½“å‰å®½åº¦: ${width}px</p>
                    <p>çŠ¶æ€: æ¡Œé¢ç«¯å¸ƒå±€æ­£å¸¸</p>
                `;
            }
        }

        async function testAPI() {
            const resultBox = document.getElementById('api-result');
            resultBox.innerHTML = '<p>â³ æ­£åœ¨åˆ†æä¸­...</p>';
            
            try {
                const data = {
                    houseType: document.getElementById('houseType').value,
                    direction: document.getElementById('direction').value,
                    concerns: document.getElementById('concerns').value || 'è´¢è¿'
                };

                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                
                if (result.success) {
                    resultBox.innerHTML = `
                        <h3>âœ… åˆ†æå®Œæˆ</h3>
                        <p><strong>è¯„åˆ†:</strong> ${result.data.score}åˆ†</p>
                        <p><strong>ç­‰çº§:</strong> ${result.data.gradeInfo.level}</p>
                        <p><strong>æ¨¡å‹:</strong> ${result.data.model}</p>
                        <p><strong>å“åº”æ—¶é—´:</strong> ${new Date().toLocaleTimeString()}</p>
                        <div style="max-height: 150px; overflow-y: auto; margin-top: 10px; background: #1A1F2E; padding: 10px; border-radius: 4px;">
                            <small>${result.data.analysis.substring(0, 200)}...</small>
                        </div>
                    `;
                } else {
                    resultBox.innerHTML = `<p>âŒ åˆ†æå¤±è´¥: ${result.message}</p>`;
                }
            } catch (error) {
                resultBox.innerHTML = `<p>âŒ è¿æ¥é”™è¯¯: ${error.message}</p>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•ç§»åŠ¨ç«¯
        window.onload = () => {
            testMobile();
            console.log('ğŸ§ª UIæµ‹è¯•é¡µé¢å·²åŠ è½½');
        };

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        window.onresize = testMobile;
    </script>
</body>
</html>